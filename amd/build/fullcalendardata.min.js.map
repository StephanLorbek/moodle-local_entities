{"version":3,"file":"fullcalendardata.min.js","sources":["../src/fullcalendardata.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/*\r\n * @package    local_entities\r\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport {Calendar} from 'local_entities/fullcalendar';\r\nimport Ajax from 'core/ajax';\r\n\r\nvar initialLocaleCode = \"\";\r\nvar calendarEl = \"\";\r\n\r\n/**\r\n * Init Calendar\r\n * @param {entityid} entityid\r\n * @param {string} locale\r\n * @param {string} jsondata\r\n */\r\nexport const init = (entityid, locale, jsondata = null) => {\r\n    initialLocaleCode = locale;\r\n    calendarEl = document.getElementById('entity-calendar');\r\n    if (!jsondata) {\r\n        jsondata = getEntityCalendardata(entityid);\r\n    } else {\r\n        renderCalendar(jsondata);\r\n    }\r\n};\r\n\r\nconst renderCalendar = (events) => {\r\n    var calendar = new Calendar(calendarEl, {\r\n        timeZone: 'UTC',\r\n        eventStartEditable: false,\r\n        displayEventEnd: true,\r\n        headerToolbar: {\r\n          left: 'prev,next today',\r\n          center: 'title',\r\n          right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'\r\n        },\r\n        locale: initialLocaleCode,\r\n        buttonIcons: false,\r\n        weekNumbers: true,\r\n        navLinks: true,\r\n        editable: true,\r\n        dayMaxEvents: true,\r\n        events: events,\r\n        buttonText: {\r\n          prev: \"Zur\\xFCck\",\r\n          next: \"Vor\",\r\n          today: \"Heute\",\r\n          year: \"Jahr\",\r\n          month: \"Monat\",\r\n          week: \"Woche\",\r\n          day: \"Tag\",\r\n          list: \"Termin\\xFCbersicht\"\r\n        },\r\n        weekText: \"KW\",\r\n        weekTextLong: \"Woche\",\r\n        allDayText: \"Ganzt\\xE4gig\",\r\n        moreLinkText: function(n) {\r\n          return \"+ weitere \" + n;\r\n        },\r\n        noEventsText: \"Keine Ereignisse anzuzeigen\",\r\n        buttonHints: {\r\n          prev: function(buttonText) {\r\n            return \"Vorherige\".concat(affix(buttonText), \" \").concat(buttonText);\r\n          },\r\n          next: function(buttonText) {\r\n            return \"N\\xE4chste\".concat(affix(buttonText), \" \").concat(buttonText);\r\n          },\r\n          today: function(buttonText) {\r\n            if (buttonText === \"Tag\") {\r\n              return \"Heute\";\r\n            }\r\n            return \"Diese\".concat(affix(buttonText), \" \").concat(buttonText);\r\n          }\r\n        },\r\n        viewHint: function(buttonText) {\r\n          // eslint-disable-next-line no-nested-ternary\r\n          var glue = buttonText === \"Woche\" ? \"n\" : buttonText === \"Monat\" ? \"s\" : \"es\";\r\n          return buttonText + glue + \"ansicht\";\r\n        },\r\n        navLinkHint: \"Gehe zu $0\",\r\n        moreLinkHint: function(eventCnt) {\r\n          return \"Zeige \" + (eventCnt === 1 ? \"ein weiteres Ereignis\" : eventCnt + \" weitere Ereignisse\");\r\n        },\r\n        closeHint: \"Schlie\\xDFen\",\r\n        timeHint: \"Uhrzeit\",\r\n        eventHint: \"Ereignis\"\r\n      });\r\n      console.log(\"test\");\r\n\r\n      calendar.render();\r\n};\r\n\r\n/**\r\n * Returns the right affix\r\n * @param {string} buttonText\r\n * @returns {string}\r\n */\r\nfunction affix(buttonText) {\r\n    // eslint-disable-next-line no-nested-ternary\r\n    return buttonText === \"Tag\" || buttonText === \"Monat\" ? \"r\" : buttonText === \"Jahr\" ? \"s\" : \"\";\r\n}\r\n\r\n/**\r\n * Get Calendardata via WS.\r\n * @param {integer} entityid\r\n *\r\n */\r\nconst getEntityCalendardata = (entityid) => {\r\n    let request = {\r\n        methodname: 'local_entities_get_entity_calendardata',\r\n        args: {'id': entityid}\r\n    };\r\n    Ajax.call([request])[0].done(function(data) {\r\n        if (data.json) {\r\n            renderCalendar(JSON.parse(data.json));\r\n        } else {\r\n            // eslint-disable-next-line no-console\r\n            console.log(data.error);\r\n        }\r\n    }).fail();\r\n};\r\n"],"names":["initialLocaleCode","calendarEl","entityid","locale","jsondata","document","getElementById","renderCalendar","getEntityCalendardata","events","calendar","Calendar","timeZone","eventStartEditable","displayEventEnd","headerToolbar","left","center","right","buttonIcons","weekNumbers","navLinks","editable","dayMaxEvents","buttonText","prev","next","today","year","month","week","day","list","weekText","weekTextLong","allDayText","moreLinkText","n","noEventsText","buttonHints","concat","affix","viewHint","navLinkHint","moreLinkHint","eventCnt","closeHint","timeHint","eventHint","console","log","render","request","methodname","args","call","done","data","json","JSON","parse","error","fail"],"mappings":";;;;;0IAwBIA,kBAAoB,GACpBC,WAAa,iBAQG,SAACC,SAAUC,YAAQC,gEAAW,KAC9CJ,kBAAoBG,OACpBF,WAAaI,SAASC,eAAe,mBAChCF,SAGDG,eAAeH,UAFfA,SAAWI,sBAAsBN,iBAMnCK,eAAkBE,aAChBC,SAAW,IAAIC,uBAASV,WAAY,CACpCW,SAAU,MACVC,oBAAoB,EACpBC,iBAAiB,EACjBC,cAAe,CACbC,KAAM,kBACNC,OAAQ,QACRC,MAAO,mDAETf,OAAQH,kBACRmB,aAAa,EACbC,aAAa,EACbC,UAAU,EACVC,UAAU,EACVC,cAAc,EACdd,OAAQA,OACRe,WAAY,CACVC,KAAM,SACNC,KAAM,MACNC,MAAO,QACPC,KAAM,OACNC,MAAO,QACPC,KAAM,QACNC,IAAK,MACLC,KAAM,mBAERC,SAAU,KACVC,aAAc,QACdC,WAAY,YACZC,aAAc,SAASC,SACd,aAAeA,GAExBC,aAAc,8BACdC,YAAa,CACXd,KAAM,SAASD,kBACN,YAAYgB,OAAOC,MAAMjB,YAAa,KAAKgB,OAAOhB,aAE3DE,KAAM,SAASF,kBACN,UAAagB,OAAOC,MAAMjB,YAAa,KAAKgB,OAAOhB,aAE5DG,MAAO,SAASH,kBACK,QAAfA,WACK,QAEF,QAAQgB,OAAOC,MAAMjB,YAAa,KAAKgB,OAAOhB,cAGzDkB,SAAU,SAASlB,mBAGVA,YADmB,UAAfA,WAAyB,IAAqB,UAAfA,WAAyB,IAAM,MAC9C,WAE7BmB,YAAa,aACbC,aAAc,SAASC,gBACd,UAAyB,IAAbA,SAAiB,wBAA0BA,SAAW,wBAE3EC,UAAW,YACXC,SAAU,UACVC,UAAW,aAEbC,QAAQC,IAAI,QAEZxC,SAASyC,mBAQNV,MAAMjB,kBAEW,QAAfA,YAAuC,UAAfA,WAAyB,IAAqB,SAAfA,WAAwB,IAAM,SAQ1FhB,sBAAyBN,eACvBkD,QAAU,CACVC,WAAY,yCACZC,KAAM,IAAOpD,yBAEZqD,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MAC9BA,KAAKC,KACLnD,eAAeoD,KAAKC,MAAMH,KAAKC,OAG/BT,QAAQC,IAAIO,KAAKI,UAEtBC"}