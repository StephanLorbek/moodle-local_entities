{"version":3,"file":"handler.min.js","sources":["../src/handler.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    mod_booking\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Templates from 'core/templates';\n\nimport {\n    get_strings as getStrings\n        }\n        from 'core/str';\n\nexport const init = () => {\n    const element = document.querySelector('#id_openmodal');\n\n    // eslint-disable-next-line no-console\n    console.log(element);\n\n    element.addEventListener('click', event => {\n        // eslint-disable-next-line no-console\n        console.log(event);\n\n        timeTableModal(1);\n    });\n};\n\n/**\n *\n * @param {entityid} entityid\n */\n function timeTableModal(entityid) {\n\n    getStrings([\n        {key: 'timetablemodaltitle', component: 'local_entities'},\n        {key: 'timetablemodalbutton', component: 'local_entities'}\n    ]\n    ).then(strings => {\n\n        const id = entityid;\n        const json = {'id': id, 'locale': 'de'};\n        Templates.renderForPromise('local_entities/entitiescalendar', json).then(({html, js}) => {\n\n        ModalFactory.create({type: ModalFactory.types.SAVE_CANCEL, large: 'true'}).then(modal => {\n\n            modal.setTitle(strings[0]);\n            modal.setBody(html);\n            modal.setSaveButtonText(strings[1]);\n            modal.getRoot().on(ModalEvents.save, function() {\n\n                // eslint-disable-next-line no-console\n                console.log(html);\n\n            });\n\n            modal.show();\n\n            Templates.runTemplateJS(js);\n            return modal;\n        }).catch(e => {\n            // eslint-disable-next-line no-console\n            console.log(e);\n        });\n        return true;\n        }).catch(e => {\n            // eslint-disable-next-line no-console\n            console.log(e);\n        });\n        return true;\n    }).catch(e => {\n        // eslint-disable-next-line no-console\n        console.log(e);\n    });\n}"],"names":["element","document","querySelector","console","log","addEventListener","event","entityid","key","component","then","strings","json","renderForPromise","_ref","html","js","create","type","ModalFactory","types","SAVE_CANCEL","large","modal","setTitle","setBody","setSaveButtonText","getRoot","on","ModalEvents","save","show","runTemplateJS","catch","e"],"mappings":";;;;;wPA8BoB,WACVA,QAAUC,SAASC,cAAc,iBAGvCC,QAAQC,IAAIJ,SAEZA,QAAQK,iBAAiB,SAASC,YAYbC,SAVjBJ,QAAQC,IAAIE,OAUKC,SARF,uBAUR,CACP,CAACC,IAAK,sBAAuBC,UAAW,kBACxC,CAACD,IAAK,uBAAwBC,UAAW,oBAE3CC,MAAKC,gBAGGC,KAAO,IADFL,gBACuB,gCACxBM,iBAAiB,kCAAmCD,MAAMF,MAAKI,WAACC,KAACA,KAADC,GAAOA,uCAEpEC,OAAO,CAACC,KAAMC,uBAAaC,MAAMC,YAAaC,MAAO,SAASZ,MAAKa,QAE5EA,MAAMC,SAASb,QAAQ,IACvBY,MAAME,QAAQV,MACdQ,MAAMG,kBAAkBf,QAAQ,IAChCY,MAAMI,UAAUC,GAAGC,sBAAYC,MAAM,WAGjC3B,QAAQC,IAAIW,SAIhBQ,MAAMQ,0BAEIC,cAAchB,IACjBO,SACRU,OAAMC,IAEL/B,QAAQC,IAAI8B,OAET,KACJD,OAAMC,IAEL/B,QAAQC,IAAI8B,OAET,KACRD,OAAMC,IAEL/B,QAAQC,IAAI8B"}